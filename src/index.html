<!-- build:remove -->
<%= t.include("partials/_top.html") %>
<!-- /build -->
<!-- build:css inline -->
<link rel="stylesheet" type="text/css" href="style.css">
<!-- /build -->





<!-- Code that goes within WCM Freeform -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<script type="text/javascript">
// Twitter Intent
(function() {
  if (window.__twitterIntentHandler) return;
  var intentRegex = /twitter\.com\/intent\/(\w+)/,
      windowOptions = 'scrollbars=yes,resizable=yes,toolbar=no,location=yes',
      width = 550,
      height = 420,
      winHeight = screen.height,
      winWidth = screen.width;

  function handleIntent(e) {
    e = e || window.event;
    var target = e.target || e.srcElement,
        m, left, top;

    while (target && target.nodeName.toLowerCase() !== 'a') {
      target = target.parentNode;
    }

    if (target && target.nodeName.toLowerCase() === 'a' && target.href) {
      m = target.href.match(intentRegex);
      if (m) {
        left = Math.round((winWidth / 2) - (width / 2));
        top = 0;

        if (winHeight > height) {
          top = Math.round((winHeight / 2) - (height / 2));
        }

        window.open(target.href, 'intent', windowOptions + ',width=' + width +
                                           ',height=' + height + ',left=' + left + ',top=' + top);
        e.returnValue = false;
        e.preventDefault && e.preventDefault();
      }
    }
  }

  if (document.addEventListener) {
    document.addEventListener('click', handleIntent, false);
  } else if (document.attachEvent) {
    document.attachEvent('onclick', handleIntent);
  }
  window.__twitterIntentHandler = true;
}());

$(document).ready(function() {
 

  $(window).scroll(function() {
    
  var window_top = document.body.scrollTop;
  var div_top = document.getElementById('stick-here').getBoundingClientRect().top + window_top;



  for (var i = 0; i < 9; i++) {
    var a = document.getElementById("map-"+i);
    var at = document.getElementById("map-"+i);
    //console.log(at);



    if (i == 8) {
      var ed_top = a.getBoundingClientRect().top + window_top - 460;
      var ede_top = a.getBoundingClientRect().bottom + window_top - 715;

    } else {
      var ed_top = a.getBoundingClientRect().top + window_top - 465;
      var ede_top = a.getBoundingClientRect().bottom + window_top - 460;
    }

    if (window_top > ed_top && window_top < ede_top) {

      at.classList.add('active');
      a.classList.add('active');
      // if (i == 8) {
      //   document.getElementById('map-8').classList.add('unstuck');
      // }

    } else {
      
      at.classList.remove('active');
      a.classList.remove('active');
      if (i == 8) {
        console.log("hello");
       
      }
    }
  }
});
});
</script>


<div class="dtf-container timeline">
	<div class="subhead timeline">The wines from this land have been famous for 150 years. Scroll down to see what sorts of wines the vineyardâ€™s different parcels are yielding today.

  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin egestas nisl tellus, sed egestas diam dapibus in. Sed dapibus metus sit amet neque pharetra, at varius nisi varius. Nullam quis venenatis dolor. Nulla consectetur nulla ut ex molestie molestie. Pellentesque convallis venenatis dictum. Integer finibus consectetur finibus. Aenean mauris dui, sollicitudin a imperdiet eget, feugiat et mi. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Maecenas rhoncus vel sem et placerat. Aliquam non mauris tempus, tincidunt ipsum at, sodales erat. Vestibulum semper nulla nisl, at iaculis purus iaculis at.

Nulla at eleifend ligula. Praesent egestas felis mauris, vitae finibus est ullamcorper quis. Proin placerat, magna tristique ultrices ultrices, urna elit lobortis odio, ut porttitor ligula justo eget enim. Quisque vestibulum massa non erat dignissim sagittis at at dolor. Aenean nec maximus turpis. Cras finibus elementum risus, ac aliquam lorem consequat ac. Proin cursus nunc eu dolor posuere rhoncus. In dignissim justo non placerat tempus. Sed vulputate metus vitae lacinia blandit. Aliquam erat volutpat. In facilisis ac nulla nec pharetra. Ut imperdiet hendrerit ex a pharetra. Phasellus vehicula vestibulum enim eget sagittis. Aliquam vitae hendrerit leo.

In lorem urna, varius id quam ut, commodo commodo lectus. Praesent aliquam fermentum massa, sit amet tempus lorem convallis sed. Fusce a nunc sed augue elementum suscipit ut non tortor. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Curabitur eu lorem quis diam vulputate tempor et et eros. Fusce sit amet tincidunt enim. Mauris volutpat gravida facilisis. Mauris purus sapien, tempor dapibus porta eu, vulputate eget purus. Aenean ac risus accumsan, ultricies enim vel, tincidunt dui. Quisque consequat, nibh at tempus lobortis, lectus lectus vestibulum felis, varius luctus velit purus id libero. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Pellentesque tempor tincidunt auctor. Fusce faucibus, lectus non lobortis volutpat, eros mi dictum risus, nec dignissim diam lectus quis est. Duis pretium vestibulum elementum.

Ut vel nunc sit amet augue blandit interdum. Sed vel consectetur orci. Curabitur non maximus dui. Sed a neque eu nisl rhoncus pellentesque vitae ac lectus. Donec bibendum enim lorem, non luctus nunc aliquet vitae. Sed quis elit vel dolor cursus lacinia vel ullamcorper lectus. Nam fringilla luctus mauris, non consequat erat ultrices et. Duis porttitor libero odio, id vestibulum mi vulputate facilisis. Nullam pellentesque augue at dolor ullamcorper vestibulum. Sed convallis, sapien ut scelerisque finibus, urna ante vehicula purus, vel consequat metus magna in ante.

Nullam in aliquet mi, eget laoreet mauris. Donec laoreet tristique enim cursus accumsan. Aliquam vel neque vitae nunc viverra faucibus ac vitae odio. Morbi eros dolor, sagittis in pharetra sed, rutrum vel risus. Vestibulum id elit aliquam, accumsan mauris bibendum, imperdiet urna. Sed convallis quis justo sed sollicitudin. Suspendisse sed nibh eget elit lobortis lobortis quis id dolor. Donec mi turpis, egestas interdum cursus vitae, iaculis sit amet diam. Ut id mauris a tellus tristique iaculis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec eget bibendum purus. Nam est nisl, convallis vitae hendrerit in, elementum bibendum lorem.</div>
</div>


<div class="timeline" id="timeline">
  <div id="stick-here"></div>	



<% json.tokalon_text.timeline.forEach(function(event, idx){ %>

  <div class="block-group" id="map-<%= idx %>">
    <div class="block-name">
      <div class="sticky-name">
        <div class="block-yr"><img src="<%=event.Image%>"></div>
      </div>

    </div>
    
    <div class="block-content">
    	<div class="block-yr-mobile"><img src="<%=event.Image%>"></div>

      <div class="block-text">
        <% if (event.Title) { %>
        <% console.log(event.Title)  %>
          <b><%=event.Title%></b> 
        <% } %>  
        <%=event.Text%>
      </div>
      <hr>
    </div>
  </div>
<% }); %>


  <div class="credit">
  <div class="entry">Jackie Gu  &bull; <a href="mailto:jgu@sfchronicle.com">jgu@sfchronicle.com</a>   &bull; <a href="https://twitter.com/jqlngu" target="_blank">@jqlngu</a></div>
  </div>
</div>





<!-- build:remove -->
<%= t.include("partials/_bottom.html") %>
<!-- /build -->

